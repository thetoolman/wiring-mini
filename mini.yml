metadata:

#  FROM planning doc:

#  Bonnet open sense
#  Boot open sense switch
#  door/trunk open earth+diode
#
#

  title: Jasper Mini

  authors:
    Created:
      name: T4
      date: 2025-09-20



templates: 
  - &lucas
    type: Lucas
    subtype: male
  - &lucas-wire-bundle
    category: bundle
    gauge: 0.5 mm2
  - &dt-connector
    type: DT-style connector
    subtype: male
  - &ez-wire
    category: bundle
    gauge: 0.5 mm2    
  - &relay
    type: relay
    subtype: male
    pins: [30,87,86,85]
    pinlabels: [VIN,VOUT,COIL+,COIL-]
  - &blinker
    type: blinker
    subtype: male
    pinlabels: [12v-IN,BLINK-OUT]
  - &indicators
    <<: *lucas-wire-bundle
    category: bundle
    colors: [LB, BU]
    wirelabels: [LEFT,RIGHT] 
  - &illumination
    <<: *lucas-wire-bundle
    category: bundle
    colors: [BN]


connectors:
  ferrule:
    style: simple
    type: ferrule
  indicator-ferrules:
    type: ferrule
    pinlabels: [LEFT,RIGHT]

  # RELAYS
  relay-ignition-1:
    <<: *relay
  relay-ignition-2:
    <<: *relay
  relay-headlights-low:
    <<: *relay
  relay-headlights-high:
    <<: *relay
  relay-horn:
    <<: *relay


  # BLINKERS
  blinker-hazard:
    <<: *blinker
  blinker-indicators:
    <<: *blinker



  fusebox:
    <<: *lucas 
    pinlabels:
      # constant 12v input
      - SOLENOID-PWR
      # unfused 12V constant
      - IGN-1-SRC
      - IGN-2-SRC

      - HORN
      - FAN
      - DOME
      - HAZARD
      - RADIO
      - CIG-LIGHTER
      - DOOR
      # brake + ign
      - BRAKE
      - HEADLIGHTS
      - TRUNK
      # IGN-1
      - IGN-1-FEED
      - RADIO-IGN
      - AC-HEAT
      - FUEL-PUMP
      - CHOKE
      - WINDOW
      - TURN-SIG
      # IGN-2
      - IGN-2-FEED
      - GAUGES
      - CRUISE
      - WIPERS
      # solo-fuse
      - COIL


  # SWITCHES
  brake-test-dash-switch:
    <<: *dt-connector
    pinlabels: [IN, OUT, ILLUM-IN, ILLUM-GND]

  rear-demist-dash-switch:
    <<: *dt-connector
    pinlabels: [IN, OUT, ILLUM-IN, ILLUM-GND]

  hazard-dash-switch:
    <<: *dt-connector
    pinlabels: [IND-RELAY-IN,HAZARD-LAMP-12v,RIGHT-SIG, HAZ-RELAY-IN, LEFT-SIG, IND-RELAY-OUT]

  headlight-dash-switch:
    <<: *dt-connector
    pinlabels: [IN, ILLUM-OUT, MAIN-OUT]


  # COLUMN CONNECTORS
  column-ignition-m:
    <<: *lucas
    notes: BMC column igntion
    pinlabels: [+12V, R1, R2, START]
  column-ignition-f:
    <<: *lucas
    subtype: female
    pinlabels: [+12V, R1, R2, START]
  column-lights-indicators-m:
    <<: *lucas
    notes: 'BMC column indicator/hi-lo/horn stalk'
    pinlabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,NC,HI-SIG]
  column-lights-indicators-f:
    <<: *lucas
    subtype: female
    notes: 'loom indicator/hi-lo/horn stalk'
    pinlabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,NC,HI-SIG]

  column-wipers-m:
    <<: *lucas
    notes: 'BMC column wiper/squirt stalk'
    pinlabels: [WIPER-ONESHOT,SQUIRT-SIG,+12v,WIPER-2,WIPER-1]
  column-wipers-f:
    <<: *lucas
    notes: 'BMC column wiper/squirt stalk'
    pinlabels: [WIPER-ONESHOT,SQUIRT-SIG,+12v,WIPER-2,WIPER-1]

  # LOOM SECTION JOINS
  front-end-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [LEFT,RIGHT,SIDELIGHTS,LOW-BEAM,HIGH-BEAM,HORN,BONNET-SENSE,LED-5v,LED-DATA]
  rear-end-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [LEFT,RIGHT,SIDELIGHTS,BRAKE,REVERSE,BOOT-SENSE,BOOT-12v,LED-5v,LED-DATA]

  #  Lock motor
  #  door open light
  # Doorcard lighting
  door-connector:
     <<: *dt-connector
     subtype: female
     pinlabels: [ACTUATOR-1234, DOOR-12v,DOOR-SENSE-GND,LED-5v,LED-DATA,GROUND]

  fellten-connector:
    <<: *dt-connector
    subtype: female
    notes: BMC1-LOOMC10 low-volt connector
    pinlabels: [IGN,START,SIDELIGHTS,HI-SIG,LEFT-SIG,RIGHT-SIG,REVERSE,BRAKE]

  # Fellten, upstream
  # - brake transducer, inertia crash switch (already engine-side)
  # - HV ptc connector


  # ANCILLERIES
  wipers-motor-connector:
    <<: *lucas
    notes: 'BMC  wiper motor connector'
    pinlabels: [GROUND,WIPER-ONESHOT,WIPER-2,+12v,WIPER-1]

  wipers-squirt-connector:
    <<: *lucas
    notes: 'BMC windscreen washer squirt connector'
    pinlabels: [GROUND,12v]

  brake-level-connector:
    <<: *lucas
    notes: 'BMC master cylinder fluid level connector - function TBC'
    pinlabels: [A, B]

  radio-connector-m:
    <<: *dt-connector
    subtype: female
    pinlabels: [VOL-CONTROL, PHONE-MUTE, INVERT, +12v-CONSTANT, REMOTE-ON, ILLUM, +12v, GROUND ]
  radio-connector-f:
    <<: *dt-connector
    subtype: female
    pinlabels: [VOL-CONTROL, PHONE-MUTE, INVERT, +12v-CONSTANT, REMOTE-ON, ILLUM, +12v, GROUND ]
  amplifier-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [RCAs, FRONT-LR, FRONT-TWEETERS-LR, REAR-LR, SUB, +12v, REMOTE-ON, GROUND ]

  dome-dashcam-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, GROUND]
  usb-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, GROUND]
  esp32-connector:
    <<: *dt-connector
    subtype: female
    #  switches/control/screen?
    pinlabels: [12v, GROUND, CANBUS+, CANBUS-, RCA-IN ]



  #  Alarm:
  #  Siren / horn
  #  Power
  #  Indicators
  #  Canbus / Immobiliser path?
  alarm-locks-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, GROUND]



#
### CABLES
#
# note (LEFT)-... wires feed both sides: left- on wire, junction downstream
cables:

  ignition:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [BN, GNWH, WH, WHRD]

  col-ind-hilo-horn-stalk-cable:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,HI-SIG]
    colors:     [DGWH     ,      VT,    LB,BUWH ,DGRD    ,VTBK    ,GNBN   ,BURD   ]

  column-to-relay:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [DG, WH]
    wirelabels: [(TEMP-SND)-R1,(BRAKE-SW)-R2]

  col-wiper-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [ BNGN, GNBK, DG, BUGN,RDGN ]
    wirelabels: [WIPER-ONESHOT,SQUIRT-SIG,+12v,WIPER-2,WIPER-1]

  col-squirt-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [ BK, LB]
    wirelabels: [GROUND, (OIL-SENDING)-SQUIRT ]

  col-to-wiper-motor-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [ BNLG, LBLG, LGOG, RDLG ]
    wirelabels: [WIPER-ONESHOT,WIPER-2,+12v,WIPER-1 ]

  fusebox-relay-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [RD, RD, RD, GN, BN, OG]
    wirelabels: [IGN-SW,ALT-PWR,ALT-PWR-2,HORN-SW,IGN-SW-IGN,IGN-SW-ACC ]
  switch-to-column:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [ALT-PWR, POWER]
    colors: [RD,PK]
  fusebox-to-switches:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [HEADLIGHT-PWR, AC-HEAT-PWR, BRAKE-SW-PWR]
    colors: [RD,BK,OG]
  fusebox-to-blinkers:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [TURN-SIG,HAZARD]
    colors: [RD,RD]  
  blinkers-to-switches:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [HEADTURN-SIG,HAZARD]
    colors: [RD,RD]
  column-to-fellten:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [ (TEMP-SND)-R1, IGN-SW-START, HIGH-BEAM-IND]
    colors: [ DG, VT, GN]

  radio-harness:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [VOL-CONTROL, PHONE-MUTE, INVERT, +12v-CONSTANT, REMOTE-ON, ILLUM, +12v, GROUND ]
    colors: [ WH,WH,WH,YE,BU,OG,RD,BK ]

  #  Lighting:
  #  Undercar F, R, L, R
  #  doorcards x 4
  #  Under dash
  esp-lighting:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [+5v, DATA, GROUND]
    colors: [ RD,WH,GN ]


  indicator-signal-wire:
    <<: *indicators
    category: bundle
    colors: [BU, DB]
    wirelabels: [LEFT-SIG-IND,RIGHT-SIG-IND]

  indicator-front-wire:
    <<: *indicators
    category: bundle
    colors: [LB, DB ]
    wirelabels: [LEFT-FRONT-SIG,RIGHT-FRONT-SIG]

  indicator-rear-wire:
    <<: *indicators
    category: bundle
    colors: [YE, DG]
    wirelabels: [LEFT-REAR-TURN,RIGHT-REAR-TURN]

  illumination-to-fellten:
    <<: *illumination
    wirelabels: [INSTR-PNL-LIGHT]
  illumination-to-front:
    <<: *illumination
    wirelabels: [(LEFT)-FRONT-PARK]
  illumination-to-rear:
    <<: *illumination
    wirelabels: [(LEFT)-TAIL-PARK]

  
  relay-to-front-end:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [ BG, GN, OL]
    wirelabels: [ (LEFT)-LOW-BEAM,(LEFT)-HIGH-BEAM,HORN]
  switches-to-front-end:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [LB, DB, BN]
    wirelabels: [LEFT-FRONT-SIG,RIGHT-FRONT-SIG,FRONT-PARK]
  rear-end-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [YE, DG, BN, OG, GN, DG,BK,BK,BK]
    wirelabels: [LEFT-REAR-TURN,RIGHT-REAR-TURN,(LEFT)-TAIL-PARK,THIRD-BRAKE,(LEFT)-BACKUP,BOOT-SENSE,LED-5v,LED-DATA]
  relay-to-column:
    gauge: 0.5 mm2
    colors: [BG, GN, OL]
    wirelabels: [(LEFT)-LOW-BEAM,(LEFT)-HIGH-BEAM,HORN]
  virtual-switch-to-x:
    gauge: 0.5 mm2
    colors: [BK] 
    wirelabels: [AC] 

  fusebox-to-column:
    gauge: 0.5 mm2
    colors: [PK, GN, DB]
    wirelabels: [IGNITION-SW-COIL, HORN-SW, WIPER-PWR]

#
### CONNECTIONS
#
connections:


# FUSEBOX
  -
    - fusebox: [BRAKE]
    - fusebox-to-column: [IGNITION-SW-COIL]
    - column-ignition-f: [+12V]
  -
    - fusebox: [IGN-1-SRC, IGN-1-FEED]
    - fusebox-relay-cable: [IGN-SW, IGN-SW-IGN]
    - relay-ignition-1: [VIN, VOUT]
  -
    - fusebox: [IGN-2-SRC, IGN-2-FEED]
    - fusebox-relay-cable: [ALT-PWR, IGN-SW-ACC]
    - relay-ignition-2: [VIN, VOUT]
  -
    - fusebox: [HEADLIGHTS]
    - fusebox-relay-cable: [ALT-PWR-2]  
    - relay-headlights-low: [VIN]
  -
    - fusebox: [HORN]
    - fusebox-relay-cable: [HORN-SW]  
    - relay-horn: [VIN]
  -  
    - fusebox: [HORN,WIPERS]
    - fusebox-to-column: [HORN-SW, WIPER-PWR]
  -  
    - fusebox: [HEADLIGHTS,AC-HEAT,BRAKE]
    - fusebox-to-switches: [1-3]
  -  
    - fusebox: [TURN-SIG,HAZARD]
    - fusebox-to-blinkers: [TURN-SIG,HAZARD]
# SWITCHES

  -
    - hazard-dash-switch.hazard-dash-switch-clone: [IND-RELAY-OUT]
    - switch-to-column: [POWER]
    - column-lights-indicators-f: [IND-12v]
  - 
    - column-lights-indicators-m: [1-7,9]
    - col-ind-hilo-horn-stalk-cable: [1-8]
  - 
    - headlight-dash-switch: [ILLUM-OUT]
    - illumination-to-fellten.illumination-to-fellten-clone: [ 1 ]
  -
    - headlight-dash-switch: [ILLUM-OUT]
    - illumination-to-front.illumination-to-front-clone: [ 1 ]
  -
    - headlight-dash-switch: [ILLUM-OUT]
    - illumination-to-rear.illumination-to-rear-clone: [ 1 ]


  -
    - headlight-dash-switch: [MAIN-OUT]
    - switch-to-column: [ALT-PWR]
    - column-lights-indicators-f: [HL-12v]
  -
    - fusebox-to-switches.fusebox-to-switches-clone: [AC-HEAT-PWR]
    - rear-demist-dash-switch: [IN]
  -
    - rear-demist-dash-switch: [OUT]
    - virtual-switch-to-x: [AC]
  -
    - fusebox-to-switches.fusebox-to-switches-clone: [HEADLIGHT-PWR]
    - headlight-dash-switch: [IN]  

  # COLUMN
  -
    - column-to-relay: [(TEMP-SND)-R1,(BRAKE-SW)-R2]
    - column-ignition-f: [R1, R2]
  -
    - column-to-fellten.column-to-fellten-clone: [(TEMP-SND)-R1,IGN-SW-START]
    - column-ignition-f: [R1, START]
  # -
  #   - column-ignition-f
  #   - <==>
  #   - column-ignition-m
  -
    - column-ignition-m: [1-4]
    - ignition: [1-4]

  # -
  #   - column-lights-indicators-f
  #   - <==>
  #   - column-lights-indicators-m
  - 
    - relay-to-column.relay-to-column-clone: [1-3]
    - column-lights-indicators-f: [LO-SIG,HI-SIG,HORN-SIG]
  -
    - column-to-fellten.column-to-fellten-clone: [HIGH-BEAM-IND]
    - column-lights-indicators-f: [HI-SIG]
  - 
    - fusebox-to-column.fusebox-to-column-clone: [HORN-SW]
    - column-lights-indicators-f: [HORN-12v]
  -
    - fusebox-to-column.fusebox-to-column-clone: [WIPER-PWR]
    - column-wipers-m: [+12v]
  -
    - col-squirt-cable: [(OIL-SENDING)-SQUIRT]
    - column-wipers-m: [SQUIRT-SIG]
  - 
    - indicator-signal-wire.indicators-from-column: [LEFT-SIG-IND,RIGHT-SIG-IND]
    - column-lights-indicators-f: [LEFT-SIG,RIGHT-SIG]

  -
    - column-wipers-f : [1-5]
    - col-wiper-cable: [1-5]
#  -
#     - column-wipers-m
#     - <==>
#     - column-wipers-f
  -
    - wipers-motor-connector: [ WIPER-ONESHOT,WIPER-2,+12v,WIPER-1 ]
    - col-to-wiper-motor-cable:  [WIPER-ONESHOT,WIPER-2,+12v,WIPER-1 ]
    - column-wipers-m:  [WIPER-ONESHOT,WIPER-2,+12v,WIPER-1 ]

  #  RELAYS: signals
  -
    - relay-ignition-1: [COIL+]  
    - column-to-relay: [(TEMP-SND)-R1]
  -
    - relay-ignition-2: [COIL+]  
    - column-to-relay: [(BRAKE-SW)-R2]    
  -  
    - relay-horn: [COIL+]
    - relay-to-column: [3]
  -  
    - relay-headlights-low: [COIL+]
    - relay-to-column: [1]
  -  
    - relay-headlights-high: [COIL+]
    - relay-to-column: [2]

  # RELAYS: input
  -
    - fusebox-relay-cable: [ALT-PWR-2]  
    - relay-headlights-high: [VIN]

  # RELAYS: output
  -
    - relay-headlights-low: [VOUT]
    - relay-to-front-end: [(LEFT)-LOW-BEAM]
  -
    - relay-headlights-high: [VOUT]
    - relay-to-front-end: [(LEFT)-HIGH-BEAM]
  -
    - relay-horn: [VOUT]
    - relay-to-front-end: [HORN]

  # BLINKERS
  - 
    - fusebox-to-blinkers.fusebox-to-blinkers-clone: [HAZARD]
    - blinker-hazard: [12v-IN]
  - 
    - fusebox-to-blinkers.fusebox-to-blinkers-clone: [TURN-SIG]
    - blinker-indicators: [12v-IN]
  -
    - blinker-indicators: [BLINK-OUT]
    - blinkers-to-switches: 1
    - hazard-dash-switch: [IND-RELAY-IN]
  -
    - blinker-hazard: [BLINK-OUT]
    - blinkers-to-switches: 2
    - hazard-dash-switch: [HAZ-RELAY-IN]

# RADIO
  -
    - radio-connector-m: [1-8]
    - radio-harness: [1-8]

  # LOOM CONNECTORS
  - 
    - switches-to-front-end: [1-3]
    - front-end-connector: [1-3]
  -
    - relay-to-front-end: [(LEFT)-LOW-BEAM,(LEFT)-HIGH-BEAM,HORN]
    - front-end-connector: [LOW-BEAM,HIGH-BEAM,HORN]
  -
    - indicator-front-wire: [1-2]
    - ferrule.
    - switches-to-front-end: [1-2]
  -
    - indicator-signal-wire.from-hazard: [1,2]
    - hazard-dash-switch: [ LEFT-SIG,RIGHT-SIG ]
  -
    - indicator-signal-wire.indicators-to-fellten: [1,2]
    - fellten-connector: [ LEFT-SIG,RIGHT-SIG ]
  -
    - illumination-to-fellten: [1]
    - fellten-connector: [ SIDELIGHTS ]
  -
    - illumination-to-front: [1]
    - ferrule.
    - switches-to-front-end: [ FRONT-PARK]
  -
    - illumination-to-rear: [1]
    - ferrule.
    - rear-end-cable: [ (LEFT)-TAIL-PARK ]
  -
    - column-to-fellten: [ (TEMP-SND)-R1, IGN-SW-START, HIGH-BEAM-IND ]
    - fellten-connector: [ IGN, START, HI-SIG ]
  -
    - fellten-connector: [ REVERSE, BRAKE]
    - rear-end-cable: [ (LEFT)-BACKUP, THIRD-BRAKE ]
  -
    - indicator-rear-wire: [1-2]
    - ferrule.
    - rear-end-cable: [1-2]
  -
    - rear-end-cable: [1-8]
    - rear-end-connector: [1-8]


  # LIGHTING JUNCTIONS

  # indicator junction near switches
  -
    - indicator-signal-wire.indicators-to-fellten-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-signal-wire.indicators-from-column-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-rear-wire.indicator-rear-wire-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-front-wire.indicator-front-wire-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-ferrules: [1-2]
    - from-hazard: [1-2]






  
