metadata:
 
  title: Jasper Mini

  authors:
    Created:
      name: T4
      date: 2025-09-20

  template:
    name: din-6771
    sheetsize: A3

templates: 
  - &lucas
    type: Lucas
    subtype: male
  - &lucas_wire_bundle
    category: bundle
    gauge: 0.5 mm2
  - &dt_connector
    type: DT-style connector
    subtype: male
  - &ez-wire
    category: bundle
    gauge: 0.5 mm2    
  - &relay
    type: relay
    subtype: male
    pins: [30,87,86,85]
    pinlabels: [VIN,VOUT,COIL+,COIL-]
  - &blinker
    type: blinker
    subtype: male
    pinlabels: [12v-IN,BLINK-OUT]
  - &indicators
    <<: *lucas_wire_bundle
    category: bundle
    colors: [LB, BU]
    wirelabels: [LEFT,RIGHT] 



connectors:
  ferrule:
    style: simple
    type: ferrule
  indicator-ferrules:
    type: ferrule
    pinlabels: [LEFT,RIGHT]

  # RELAYS
  relay_ignition_1:
    <<: *relay
  relay_ignition_2:
    <<: *relay
  relay_headlights_low:
    <<: *relay
  relay_headlights_high:
    <<: *relay
  relay_horn:
    <<: *relay


  # BLINKERS
  blinker_hazard:
    <<: *blinker
  blinker_indicators:
    <<: *blinker



  fusebox:
    <<: *lucas 
    pinlabels: 
      # extra unfused 12V constant to use
      - IGN-SW
      - ALT-PWR
      # constant 12v
      - SOLENOID-PWR
      - HORN
      - FAN
      - DOME
      - HAZARD
      - RADIO
      - CIG-LIGHTER
      - DOOR
      - BRAKE
      - HEADLIGHTS
      - TRUNK
      # IGN-1
      - IGN-SW-IGN
      - RADIO-IGN
      - AC-HEAT
      - FUEL-PUMP
      - CHOKE
      - WINDOW
      - TURN-SIG
      # IGN-2
      - IGN-SW-ACC
      - GAUGES
      - CRUISE
      - WIPERS
      # solo-fuse
      - COIL


  # SWITCHES
  brake_test_dash_switch:
    <<: *dt_connector
    pinlabels: [IN, OUT, ILLUM-IN, ILLUM-GND]

  rear_demist_dash_switch:
    <<: *dt_connector
    pinlabels: [IN, OUT, ILLUM-IN, ILLUM-GND]

  hazard_dash_switch:
    <<: *dt_connector
    pinlabels: [IND-RELAY-IN,HAZARD-LAMP-12v,RIGHT-SIG, HAZ-RELAY-IN, LEFT-SIG, IND-RELAY-OUT]

  headlight_dash_switch:
    <<: *dt_connector
    pinlabels: [IN, ILLUM-OUT, MAIN-OUT]


  # COLUMN CONNECTORS
  column_ignition_m:
    <<: *lucas
    notes: BMC column igntion
    pinlabels: [+12V, R1, R2, START]
  column_ignition_f:
    <<: *lucas
    subtype: female
    pinlabels: [+12V, R1, R2, START]
  column_lights_indicators_m:
    <<: *lucas
    notes: 'BMC column indicator/hi-lo/horn stalk'
    pinlabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,NC,HI-SIG]
  column_lights_indicators_f:
    <<: *lucas
    subtype: female
    notes: 'loom indicator/hi-lo/horn stalk'
    pinlabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,NC,HI-SIG]


  # LOOM SECTION JOINS
  front_end_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [LEFT,RIGHT,SIDELIGHTS,LOW_BEAM,HIGH_BEAM,HORN,BONNET-SENSE,LED-5v,LED-DATA]
  rear_end_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [LEFT,RIGHT,SIDELIGHTS,BRAKE,REVERSE,BOOT-SENSE,LED-5v,LED-DATA]
  fellten_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [IGN,START,SIDELIGHTS,HI-SIG,LEFT-SIG,RIGHT-SIG,REVERSE,BRAKE]    

  # ANCILLERIES
  radio_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [12v, 1-12v, GROUND, ILLUM,AMP-SIG]
  dome_dashcam_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [12v, GROUND]
  usb_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [12v, GROUND]
  esp32_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [12v, GROUND]    
  alarm_locks_connector:
    <<: *dt_connector
    subtype: female
    pinlabels: [12v, GROUND]



#
### CABLES
#
cables:

  ignition:
    <<: *lucas_wire_bundle
    category: bundle
    colors: [BN, GNWH, WH, WHRD]

  col_ind_hilo_horn_stalk_cable:
    <<: *lucas_wire_bundle
    category: bundle
    wirelabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,HI-SIG]
    colors:     [GNWH     ,      VT,    BU,BUWH ,GNRD    ,VTBK    ,GNBN   ,BURD   ]

  col_ign_cable:
    <<: *lucas_wire_bundle
    category: bundle
    colors: [RD, OL, WH, WHRD]
    wirelabels: [CHOKE-PWR,(TEMP-SND)-R1,(BRAKE-SW)-R2,START]



  fusebox_relay_cable:
    <<: *lucas_wire_bundle
    category: bundle
    colors: [RD, RD, RD, GN, BN, OG]
    wirelabels: [IGN-SW,ALT-PWR,ALT-PWR-2,HORN-SW,IGN-SW-IGN,IGN-SW-ACC]
  switch-to-column:
    <<: *lucas_wire_bundle
    category: bundle
    wirelabels: [ALT-PWR, SAFETY-SW]
    colors: [RD,VT]
  fusebox-to-switches:
    <<: *lucas_wire_bundle
    category: bundle
    wirelabels: [HEADLIGHT-PWR, AC-HEAT-PWR]
    colors: [RD,BK]
  fusebox-to-blinkers:
    <<: *lucas_wire_bundle
    category: bundle
    wirelabels: [TURN-SIG,HAZARD]
    colors: [RD,RD]  
  blinkers-to-switches:
    <<: *lucas_wire_bundle
    category: bundle
    wirelabels: [HEADTURN-SIG,HAZARD]
    colors: [RD,RD]
    
  indicator-signal-wire:
    <<: *indicators
    category: bundle
    colors: [BU, "#000070"]
    wirelabels: [LEFT-SIG-IND,RIGHT-SIG-IND]

  indicator-front-wire:
    <<: *indicators
    category: bundle
    colors: [LB, "#000070"]
    wirelabels: [LEFT-FRONT-SIG,RIGHT-FRONT-SIG]

  indicator-rear-wire:
    <<: *indicators
    category: bundle
    colors: [YE, OL]
    wirelabels: [LEFT-REAR-TURN,RIGHT-REAR-TURN]

  # note (left)-... wire feeds both sides: left- on wire, junction downstream
  front_end_cable:
    <<: *lucas_wire_bundle
    category: bundle
    colors: [LB, "#000070", BN, BG, GN, OL]
    wirelabels: [LEFT-FRONT-SIG,RIGHT-FRONT-SIG,FRONT-PARK,(LEFT)-LOW-BEAM,(LEFT)-HIGH-BEAM,HORN]
  rear_end_cable:
    <<: *lucas_wire_bundle
    category: bundle
    colors: [YE, OL, BN, OG, GN, OL,BK,BK,BK]
    wirelabels: [LEFT-REAR-TURN,RIGHT-REAR-TURN,(LEFT)-TAIL-PARK,THIRD-BRAKE,(LEFT)-BACKUP,BOOT-SENSE,LED-5v,LED-DATA]
  relay_to_column:
    gauge: 0.5 mm2
    colors: [BG, GN, OL]
    wirelabels: [(LEFT)-LOW-BEAM,(LEFT)-HIGH-BEAM,HORN]
  virtual-switch-to-x:
    gauge: 0.5 mm2
    colors: [BK] 
    wirelabels: [AC] 

  fusebox-to-column:
    gauge: 0.5 mm2
    colors: [GN] 
    wirelabels: [HORN-SW]       

#
### CONNECTIONS
#
connections:


# FUSEBOX
  -
    - fusebox: [BRAKE]
    - col_ign_cable: [CHOKE-PWR]
    - column_ignition_f: [+12V]
  -
    - fusebox: [IGN-SW, IGN-SW-IGN]
    - fusebox_relay_cable: [IGN-SW, IGN-SW-IGN]
    - relay_ignition_1: [VIN, VOUT]
  -
    - fusebox: [ALT-PWR, IGN-SW-ACC]
    - fusebox_relay_cable: [ALT-PWR, IGN-SW-ACC]
    - relay_ignition_2: [VIN, VOUT]
  -
    - fusebox: [HEADLIGHTS]
    - fusebox_relay_cable: [ALT-PWR-2]  
    - relay_headlights_low: [VIN]
  -
    - fusebox: [HORN]
    - fusebox_relay_cable: [HORN-SW]  
    - relay_horn: [VIN]
  -  
    - fusebox: [HORN]
    - fusebox-to-column: [1]  
  -  
    - fusebox: [HEADLIGHTS,AC-HEAT]
    - fusebox-to-switches.fusebox-to-switches-clone: [1-2]  
  -  
    - fusebox: [TURN-SIG,HAZARD]
    - fusebox-to-blinkers.fusebox-to-blinkers-clone: [TURN-SIG,HAZARD]  
# SWITCHES

  -
    - hazard_dash_switch.hazard_dash_switch-clone: [IND-RELAY-OUT]
    - switch-to-column: [SAFETY-SW]
    - column_lights_indicators_f: [IND-12v]
  - 
    - column_lights_indicators_m: [1-7,9]
    - col_ind_hilo_horn_stalk_cable: [1-8]
  - 
    - headlight_dash_switch: [MAIN-OUT]
    - switch-to-column: [ALT-PWR]
    - column_lights_indicators_f: [HL-12v]
  -
    - fusebox-to-switches: [AC-HEAT-PWR]
    - rear_demist_dash_switch: [IN]
  -
    - rear_demist_dash_switch: [OUT]
    - virtual-switch-to-x: [AC]
  -
    - fusebox-to-switches: [HEADLIGHT-PWR]
    - headlight_dash_switch: [IN]  

  # COLUMN  
  -
    - col_ign_cable: [START, (TEMP-SND)-R1,(BRAKE-SW)-R2]
    - column_ignition_f: [START, R1, R2]
  # -
  #   - column_ignition_f
  #   - <==>
  #   - column_ignition_m
  -
    - column_ignition_m: [1-4]
    - ignition: [1-4]

  # -
  #   - column_lights_indicators_f
  #   - <==>
  #   - column_lights_indicators_m
  - 
    - relay_to_column.relay_to_column-clone: [1-3]
    - column_lights_indicators_f: [LO-SIG,HI-SIG,HORN-SIG]
  - 
    - fusebox-to-column.fusebox-to-column-clone: [HORN-SW]
    - column_lights_indicators_f: [HORN-12v]
  - 
    - indicator-signal-wire.indicators_from_column: [LEFT-SIG-IND,RIGHT-SIG-IND]
    - column_lights_indicators_f: [LEFT-SIG,RIGHT-SIG]

  #  RELAYS: signals
  -
    - relay_ignition_1: [COIL+]  
    - col_ign_cable: [(TEMP-SND)-R1]
  -
    - relay_ignition_2: [COIL+]  
    - col_ign_cable: [(BRAKE-SW)-R2]    
  -  
    - relay_horn: [COIL+]
    - relay_to_column: [3]
  -  
    - relay_headlights_low: [COIL+]
    - relay_to_column: [1]
  -  
    - relay_headlights_high: [COIL+]
    - relay_to_column: [2]

  # RELAYS: input
  -
    - fusebox_relay_cable: [ALT-PWR-2]  
    - relay_headlights_high: [VIN]

  # RELAYS: output
  -
    - relay_headlights_low: [VOUT]
    - front_end_cable: [(LEFT)-LOW-BEAM]
  -
    - relay_headlights_high: [VOUT]
    - front_end_cable: [(LEFT)-HIGH-BEAM]
  -
    - relay_horn: [VOUT]
    - front_end_cable: [HORN]

  # BLINKERS
  - 
    - fusebox-to-blinkers: [HAZARD]
    - blinker_hazard: [12v-IN]
  - 
    - fusebox-to-blinkers: [TURN-SIG]
    - blinker_indicators: [12v-IN]
  -
    - blinker_indicators: [BLINK-OUT]
    - blinkers-to-switches: 1
    - hazard_dash_switch: [IND-RELAY-IN]
  -
    - blinker_hazard: [BLINK-OUT]
    - blinkers-to-switches: 2
    - hazard_dash_switch: [HAZ-RELAY-IN]


  # LOOM CONNECTORS
  - 
    - front_end_cable: [1-6]
    - front_end_connector: [1-6]
  - 
    - indicator-front-wire: [1-2]
    - ferrule.
    - front_end_cable: [1-2]
  -
    - indicator-signal-wire.from_hazard: [1,2]
    - hazard_dash_switch: [ LEFT-SIG,RIGHT-SIG ]
  -
    - indicator-signal-wire.indicators_to_fellten: [1,2]
    - fellten_connector: [ LEFT-SIG,RIGHT-SIG ]
  -
    - indicator-rear-wire: [1-2]
    - ferrule.
    - rear_end_cable: [1-2]
  -
    - rear_end_cable: [1-8]
    - rear_end_connector: [1-8]


  # LIGHTING JUNCTIONS

  # indicator junction near switches
  -
    - indicator-signal-wire.indicators_to_fellten-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-signal-wire.indicators_from_column-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-rear-wire.indicator-rear-wire-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-front-wire.indicator-front-wire-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-ferrules: [1-2]
    - from_hazard: [1-2]






  
