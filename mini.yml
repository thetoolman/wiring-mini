metadata:
 
  title: Jasper Mini

  authors:
    Created:
      name: T4
      date: 2025-09-20

  template:
    name: din-6771
    sheetsize: A3

templates: 
  - &lucas
    type: Lucas
    subtype: male
  - &lucas-wire-bundle
    category: bundle
    gauge: 0.5 mm2
  - &dt-connector
    type: DT-style connector
    subtype: male
  - &ez-wire
    category: bundle
    gauge: 0.5 mm2    
  - &relay
    type: relay
    subtype: male
    pins: [30,87,86,85]
    pinlabels: [VIN,VOUT,COIL+,COIL-]
  - &blinker
    type: blinker
    subtype: male
    pinlabels: [12v-IN,BLINK-OUT]
  - &indicators
    <<: *lucas-wire-bundle
    category: bundle
    colors: [LB, BU]
    wirelabels: [LEFT,RIGHT] 



connectors:
  ferrule:
    style: simple
    type: ferrule
  indicator-ferrules:
    type: ferrule
    pinlabels: [LEFT,RIGHT]

  # RELAYS
  relay-ignition-1:
    <<: *relay
  relay-ignition-2:
    <<: *relay
  relay-headlights-low:
    <<: *relay
  relay-headlights-high:
    <<: *relay
  relay-horn:
    <<: *relay


  # BLINKERS
  blinker-hazard:
    <<: *blinker
  blinker-indicators:
    <<: *blinker



  fusebox:
    <<: *lucas 
    pinlabels: 
      # extra unfused 12V constant to use
      - IGN-SW
      - ALT-PWR
      # constant 12v
      - SOLENOID-PWR
      - HORN
      - FAN
      - DOME
      - HAZARD
      - RADIO
      - CIG-LIGHTER
      - DOOR
      - BRAKE
      - HEADLIGHTS
      - TRUNK
      # IGN-1
      - IGN-SW-IGN
      - RADIO-IGN
      - AC-HEAT
      - FUEL-PUMP
      - CHOKE
      - WINDOW
      - TURN-SIG
      # IGN-2
      - IGN-SW-ACC
      - GAUGES
      - CRUISE
      - WIPERS
      # solo-fuse
      - COIL


  # SWITCHES
  brake-test-dash-switch:
    <<: *dt-connector
    pinlabels: [IN, OUT, ILLUM-IN, ILLUM-GND]

  rear-demist-dash-switch:
    <<: *dt-connector
    pinlabels: [IN, OUT, ILLUM-IN, ILLUM-GND]

  hazard-dash-switch:
    <<: *dt-connector
    pinlabels: [IND-RELAY-IN,HAZARD-LAMP-12v,RIGHT-SIG, HAZ-RELAY-IN, LEFT-SIG, IND-RELAY-OUT]

  headlight-dash-switch:
    <<: *dt-connector
    pinlabels: [IN, ILLUM-OUT, MAIN-OUT]


  # COLUMN CONNECTORS
  column-ignition-m:
    <<: *lucas
    notes: BMC column igntion
    pinlabels: [+12V, R1, R2, START]
  column-ignition-f:
    <<: *lucas
    subtype: female
    pinlabels: [+12V, R1, R2, START]
  column-lights-indicators-m:
    <<: *lucas
    notes: 'BMC column indicator/hi-lo/horn stalk'
    pinlabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,NC,HI-SIG]
  column-lights-indicators-f:
    <<: *lucas
    subtype: female
    notes: 'loom indicator/hi-lo/horn stalk'
    pinlabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,NC,HI-SIG]


  # LOOM SECTION JOINS
  front-end-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [LEFT,RIGHT,SIDELIGHTS,LOW-BEAM,HIGH-BEAM,HORN,BONNET-SENSE,LED-5v,LED-DATA]
  rear-end-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [LEFT,RIGHT,SIDELIGHTS,BRAKE,REVERSE,BOOT-SENSE,LED-5v,LED-DATA]
  fellten-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [IGN,START,SIDELIGHTS,HI-SIG,LEFT-SIG,RIGHT-SIG,REVERSE,BRAKE]    

  # ANCILLERIES
  radio-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, 1-12v, GROUND, ILLUM,AMP-SIG]
  dome-dashcam-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, GROUND]
  usb-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, GROUND]
  esp32-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, GROUND]    
  alarm-locks-connector:
    <<: *dt-connector
    subtype: female
    pinlabels: [12v, GROUND]



#
### CABLES
#
cables:

  ignition:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [BN, GNWH, WH, WHRD]

  col-ind-hilo-horn-stalk-cable:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [RIGHT-SIG,HORN-12v,HL-12v,LO-SIG,LEFT-SIG,HORN-SIG,IND-12v,HI-SIG]
    colors:     [GNWH     ,      VT,    BU,BUWH ,GNRD    ,VTBK    ,GNBN   ,BURD   ]

  col-ign-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [RD, OL, WH, WHRD]
    wirelabels: [CHOKE-PWR,(TEMP-SND)-R1,(BRAKE-SW)-R2,START]



  fusebox-relay-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [RD, RD, RD, GN, BN, OG]
    wirelabels: [IGN-SW,ALT-PWR,ALT-PWR-2,HORN-SW,IGN-SW-IGN,IGN-SW-ACC]
  switch-to-column:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [ALT-PWR, SAFETY-SW]
    colors: [RD,VT]
  fusebox-to-switches:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [HEADLIGHT-PWR, AC-HEAT-PWR]
    colors: [RD,BK]
  fusebox-to-blinkers:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [TURN-SIG,HAZARD]
    colors: [RD,RD]  
  blinkers-to-switches:
    <<: *lucas-wire-bundle
    category: bundle
    wirelabels: [HEADTURN-SIG,HAZARD]
    colors: [RD,RD]
    
  indicator-signal-wire:
    <<: *indicators
    category: bundle
    colors: [BU, "#000070"]
    wirelabels: [LEFT-SIG-IND,RIGHT-SIG-IND]

  indicator-front-wire:
    <<: *indicators
    category: bundle
    colors: [LB, "#000070"]
    wirelabels: [LEFT-FRONT-SIG,RIGHT-FRONT-SIG]

  indicator-rear-wire:
    <<: *indicators
    category: bundle
    colors: [YE, OL]
    wirelabels: [LEFT-REAR-TURN,RIGHT-REAR-TURN]

  # note (left)-... wire feeds both sides: left- on wire, junction downstream
  front-end-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [LB, "#000070", BN, BG, GN, OL]
    wirelabels: [LEFT-FRONT-SIG,RIGHT-FRONT-SIG,FRONT-PARK,(LEFT)-LOW-BEAM,(LEFT)-HIGH-BEAM,HORN]
  rear-end-cable:
    <<: *lucas-wire-bundle
    category: bundle
    colors: [YE, OL, BN, OG, GN, OL,BK,BK,BK]
    wirelabels: [LEFT-REAR-TURN,RIGHT-REAR-TURN,(LEFT)-TAIL-PARK,THIRD-BRAKE,(LEFT)-BACKUP,BOOT-SENSE,LED-5v,LED-DATA]
  relay-to-column:
    gauge: 0.5 mm2
    colors: [BG, GN, OL]
    wirelabels: [(LEFT)-LOW-BEAM,(LEFT)-HIGH-BEAM,HORN]
  virtual-switch-to-x:
    gauge: 0.5 mm2
    colors: [BK] 
    wirelabels: [AC] 

  fusebox-to-column:
    gauge: 0.5 mm2
    colors: [GN] 
    wirelabels: [HORN-SW]       

#
### CONNECTIONS
#
connections:


# FUSEBOX
  -
    - fusebox: [BRAKE]
    - col-ign-cable: [CHOKE-PWR]
    - column-ignition-f: [+12V]
  -
    - fusebox: [IGN-SW, IGN-SW-IGN]
    - fusebox-relay-cable: [IGN-SW, IGN-SW-IGN]
    - relay-ignition-1: [VIN, VOUT]
  -
    - fusebox: [ALT-PWR, IGN-SW-ACC]
    - fusebox-relay-cable: [ALT-PWR, IGN-SW-ACC]
    - relay-ignition-2: [VIN, VOUT]
  -
    - fusebox: [HEADLIGHTS]
    - fusebox-relay-cable: [ALT-PWR-2]  
    - relay-headlights-low: [VIN]
  -
    - fusebox: [HORN]
    - fusebox-relay-cable: [HORN-SW]  
    - relay-horn: [VIN]
  -  
    - fusebox: [HORN]
    - fusebox-to-column: [1]  
  -  
    - fusebox: [HEADLIGHTS,AC-HEAT]
    - fusebox-to-switches.fusebox-to-switches-clone: [1-2]  
  -  
    - fusebox: [TURN-SIG,HAZARD]
    - fusebox-to-blinkers.fusebox-to-blinkers-clone: [TURN-SIG,HAZARD]  
# SWITCHES

  -
    - hazard-dash-switch.hazard-dash-switch-clone: [IND-RELAY-OUT]
    - switch-to-column: [SAFETY-SW]
    - column-lights-indicators-f: [IND-12v]
  - 
    - column-lights-indicators-m: [1-7,9]
    - col-ind-hilo-horn-stalk-cable: [1-8]
  - 
    - headlight-dash-switch: [MAIN-OUT]
    - switch-to-column: [ALT-PWR]
    - column-lights-indicators-f: [HL-12v]
  -
    - fusebox-to-switches: [AC-HEAT-PWR]
    - rear-demist-dash-switch: [IN]
  -
    - rear-demist-dash-switch: [OUT]
    - virtual-switch-to-x: [AC]
  -
    - fusebox-to-switches: [HEADLIGHT-PWR]
    - headlight-dash-switch: [IN]  

  # COLUMN
  -
    - col-ign-cable: [START, (TEMP-SND)-R1,(BRAKE-SW)-R2]
    - column-ignition-f: [START, R1, R2]
  # -
  #   - column-ignition-f
  #   - <==>
  #   - column-ignition-m
  -
    - column-ignition-m: [1-4]
    - ignition: [1-4]

  # -
  #   - column-lights-indicators-f
  #   - <==>
  #   - column-lights-indicators-m
  - 
    - relay-to-column.relay-to-column-clone: [1-3]
    - column-lights-indicators-f: [LO-SIG,HI-SIG,HORN-SIG]
  - 
    - fusebox-to-column.fusebox-to-column-clone: [HORN-SW]
    - column-lights-indicators-f: [HORN-12v]
  - 
    - indicator-signal-wire.indicators-from-column: [LEFT-SIG-IND,RIGHT-SIG-IND]
    - column-lights-indicators-f: [LEFT-SIG,RIGHT-SIG]

  #  RELAYS: signals
  -
    - relay-ignition-1: [COIL+]  
    - col-ign-cable: [(TEMP-SND)-R1]
  -
    - relay-ignition-2: [COIL+]  
    - col-ign-cable: [(BRAKE-SW)-R2]    
  -  
    - relay-horn: [COIL+]
    - relay-to-column: [3]
  -  
    - relay-headlights-low: [COIL+]
    - relay-to-column: [1]
  -  
    - relay-headlights-high: [COIL+]
    - relay-to-column: [2]

  # RELAYS: input
  -
    - fusebox-relay-cable: [ALT-PWR-2]  
    - relay-headlights-high: [VIN]

  # RELAYS: output
  -
    - relay-headlights-low: [VOUT]
    - front-end-cable: [(LEFT)-LOW-BEAM]
  -
    - relay-headlights-high: [VOUT]
    - front-end-cable: [(LEFT)-HIGH-BEAM]
  -
    - relay-horn: [VOUT]
    - front-end-cable: [HORN]

  # BLINKERS
  - 
    - fusebox-to-blinkers: [HAZARD]
    - blinker-hazard: [12v-IN]
  - 
    - fusebox-to-blinkers: [TURN-SIG]
    - blinker-indicators: [12v-IN]
  -
    - blinker-indicators: [BLINK-OUT]
    - blinkers-to-switches: 1
    - hazard-dash-switch: [IND-RELAY-IN]
  -
    - blinker-hazard: [BLINK-OUT]
    - blinkers-to-switches: 2
    - hazard-dash-switch: [HAZ-RELAY-IN]


  # LOOM CONNECTORS
  - 
    - front-end-cable: [1-6]
    - front-end-connector: [1-6]
  - 
    - indicator-front-wire: [1-2]
    - ferrule.
    - front-end-cable: [1-2]
  -
    - indicator-signal-wire.from-hazard: [1,2]
    - hazard-dash-switch: [ LEFT-SIG,RIGHT-SIG ]
  -
    - indicator-signal-wire.indicators-to-fellten: [1,2]
    - fellten-connector: [ LEFT-SIG,RIGHT-SIG ]
  -
    - indicator-rear-wire: [1-2]
    - ferrule.
    - rear-end-cable: [1-2]
  -
    - rear-end-cable: [1-8]
    - rear-end-connector: [1-8]


  # LIGHTING JUNCTIONS

  # indicator junction near switches
  -
    - indicator-signal-wire.indicators-to-fellten-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-signal-wire.indicators-from-column-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-rear-wire.indicator-rear-wire-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-front-wire.indicator-front-wire-clone: [1-2]
    - indicator-ferrules: [1-2]
  -
    - indicator-ferrules: [1-2]
    - from-hazard: [1-2]






  
